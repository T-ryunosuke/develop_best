<% content_for(:title, t('.title')) %>

<div class="container mx-auto mt-10">
  <div class="flex justify-center">
    <div class="flex flex-col w-3/4">
      <div class="flex justify-start text-2xl ml-4 md:ml-6 pl-3 my-6 border-l-4 border-gray-400">
        <%= t('.title') %>
      </div>
      <div class="flex justify-center w-full">
        <%= form_with model: @user, url: profile_path, class: "w-11/12" do |f| %>
          <div class="flex flex-row space-x-4">
            <div class="basis-1/4 flex flex-col items-center">
              <%= f.label :avatar, class: 'sr-only' %>
              <% if @user.avatar.present? %>
                <%= image_tag(@user.avatar.url, class: 'rounded-full size-16 sm:size-20 my-3', id: 'preview') %>
              <% else %>
                <%= image_tag('sample.jpg', class: 'rounded-full size-16 sm:size-20 my-3', id: 'preview') %>
              <% end %>
              <label>
                <span class="text-sm cursor-pointer hover:text-blue-400">画像選択</span>
                <%= f.file_field :avatar, class: 'hidden', id: 'avatar' %>
              </label>
              <%= f.hidden_field :avatar_cache %>
            </div>

            <div class="basis-3/4">
              <div class="w-5/6 mb-4">
                <%=  render 'shared/error_messages', object: f.object %>
              </div>
              <div class="flex flex-col">
                <%= f.label :name, t(".name") %>
                <span class="my-3">
                  <%= f.text_field :name, class: 'bg-gray-100 ml-4 w-5/6 border-b-2 mb-2' %>
                </span>
                <%= f.label :email, t(".email") %>
                <span class="my-3">
                  <%= f.email_field :email, class: 'bg-gray-100 ml-4 w-5/6 border-b-2 mb-2' %>
                </span>

                <%= f.label :gender, t(".gender") %>
                <span class="ml-4 mb-4 text-md">
                  <%= f.select :gender, User.genders_i18n.keys.map {|k| [User.genders_i18n[k], k]}, { include_blank: false }, class: 'bg-gray-100 p-1 border-b-2 w-20' %>
                </span>

                <%= f.label :age, t(".age") %>
                <span class="ml-4 mb-8 text-md">
                  <%= f.select :age, User.ages_i18n.keys.map {|k| [User.ages_i18n[k], k]}, { include_blank: false }, class: 'bg-gray-100 p-1 border-b-2 w-30' %>
                </span>

                <%= f.label :profile, t(".profile") %>
                <span class="mb-3">
                  <%= f.text_area :profile, class: 'bg-gray-100 ml-4 w-5/6 border-2 p-2 mb-4' %>
                </span>
              </div>

              <div class="text-center sm:text-end">
                <%= f.submit t(".submit"), class: "btn btn-sm bg-custom-3 w-1/8 font-thin md:font-nomal mb-6 sm:mr-24 text-white" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
